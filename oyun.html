<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Play Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/style.css">
<meta property="og:type" content="game">
</head>
<body>

<header>
<a href="index.html">⬅ Back</a>
<button onclick="addFav()">⭐ Favorite</button>
</header>

<div class="ad">AD</div>

<iframe id="frame" sandbox="allow-scripts allow-same-origin"></iframe>

<div class="ad">AD</div>

<h3>Related Games</h3>
<div id="related" class="grid"></div>

<script>
const id=new URLSearchParams(location.search).get("id");
fetch("data/games.json").then(r=>r.json()).then(g=>{
 const game=g.find(x=>x.id===id);
 document.title=game.name+" | OyunSite";
 document.getElementById("frame").src=game.url;
 g.filter(x=>x.category===game.category && x.id!==id)
 .slice(0,4).forEach(o=>{
  related.innerHTML+=`<a class="card" href="game.html?id=${o.id}">
  <img src="${o.thumb}"><h4>${o.name}</h4></a>`;
 });
});
function addFav(){
 let f=JSON.parse(localStorage.getItem("fav"))||[];
 if(!f.includes(id)) f.push(id);
 localStorage.setItem("fav",JSON.stringify(f));
}
</script>

</body>
</html>